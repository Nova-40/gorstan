# Gorstan: Multiversal Adventure Game

**Version:** 2.1.2  
**License:** MIT  
**Author:** Geoff Webster

---

## Overview

**Gorstan** is a narrative-driven, multiverse-themed adventure game built with React and Node.js. Players explore interconnected rooms, solve logic puzzles, interact with quirky NPCs, and uncover secrets across shifting realities. The game features robust state management, error handling, and a modular architecture for extensibility and maintainability.

---

## Game Structure

- **Rooms:** Each room has a description, exits, image, and optional event handlers. Players navigate by moving between rooms, discovering new areas and story elements.
- **NPCs:** Non-player characters offer dialogue, hints, and unique interactions. NPC moods and memory affect their responses.
- **Puzzles:** Logic and narrative puzzles challenge the player, often requiring item use, deduction, or lateral thinking.
- **Inventory:** Items can be collected, used, or combined to progress.
- **Secrets:** Hidden tunnels and unlockable content reward exploration and experimentation.
- **Story Progress:** Tracks milestones, score, and branching narrative events.
- **Multiverse Resets:** The world can be "reset," altering the state and narrative in unique ways.

---

## Module Guide

### 1. `App.jsx` / `AppCore.jsx`
- **Purpose:** Root and core React components. Handles top-level error boundaries, phase transitions (welcome, intro, game, reset), and renders the main game UI.
- **Key Features:**  
  - Robust error trapping and fallback UI  
  - State-driven phase management  
  - Integration with all other modules/components

### 2. `ErrorBoundary.jsx`
- **Purpose:** React error boundary to catch JavaScript errors in child components.
- **Key Features:**  
  - Prevents full app crashes  
  - Displays accessible fallback UI  
  - Logs errors for debugging and optional external reporting

### 3. `main.jsx`
- **Purpose:** Application entry point. Renders the React app and handles root element errors.
- **Key Features:**  
  - Defensive checks for root element  
  - Fallback error UI if rendering fails

### 4. `npcs.js`
- **Purpose:** Defines NPCs, their dialogues, and player interactions.
- **Key Features:**  
  - Dialogue logic based on player state, inventory, and memory  
  - Handles "talk", "use", and "look" commands  
  - Integrates with achievements and secret unlocks

### 5. `npcSupportSystem.js`
- **Purpose:** Manages NPC mood, dynamic dialogue, and interaction logic.
- **Key Features:**  
  - Mood tracking and adjustment  
  - Dialogue selection based on mood and context  
  - Defensive error handling

### 6. `puzzles.js`
- **Purpose:** Defines all puzzles in the game world.
- **Key Features:**  
  - Each puzzle has a description, options, and a `solve` method  
  - Handles puzzle logic, input validation, and consequences  
  - Integrates with inventory and story progress

### 7. `resetSystem.js`
- **Purpose:** Handles multiverse resets, reset messages, and game state resets.
- **Key Features:**  
  - Generates reset messages based on reset count  
  - Resets game and inventory state  
  - Checks if reset is allowed in the current context

### 8. `saveLoad.js`
- **Purpose:** Provides save/load functionality for game state.
- **Key Features:**  
  - Saves and loads state to/from `localStorage`  
  - Defensive handling for inventory and game engine  
  - Delete and existence check for saves

### 9. `secretUnlock.js`
- **Purpose:** Centralized logic for secret tunnel access and effects.
- **Key Features:**  
  - Determines access to secret tunnels  
  - Handles special item interactions (e.g., "throw coffee")  
  - Tracks and manages unlocked secrets

### 10. `storyProgress.js`
- **Purpose:** Manages player progress, score, milestones, and story state.
- **Key Features:**  
  - Score and milestone management  
  - Story stage and event tracking  
  - Erebos event handling  
  - Save/load and high score management

### 11. `validateRooms.js`
- **Purpose:** Node.js utility to validate room configuration integrity.
- **Key Features:**  
  - Checks for missing/invalid descriptions, exits, images, and handlers  
  - Reports issues for robust content management

### 12. **Stylesheets**
- **App.css, AppCore.css, index.css, tailwind.css**
  - Provide global, core, and utility styles for the UI
  - Responsive, accessible, and visually consistent
  - Custom animations and error message styling

---

## Running the Game

1. **Install dependencies:**  
   `npm install`

2. **Start the development server:**  
   `npm run dev`

3. **Build for production:**  
   `npm run build`

4. **Validate room configuration:**  
   `node src/engine/validateRooms.js`

---

## Accessibility & Error Handling

- All modules are defensively coded with error trapping and reporting.
- Fallback UIs are provided for rendering and runtime errors.
- Animations respect user "prefers-reduced-motion" settings.
- All interactive elements are accessible via keyboard and screen readers.

---

## Contributing

Pull requests and suggestions are welcome! Please ensure code is robust, well-commented, and follows the modular structure.

---

## License

MIT License Â© 2025 Geoff Webster

---
